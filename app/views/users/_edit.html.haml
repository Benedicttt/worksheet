- if current_user.present?
  - u = @user

  %article
    %section.position_relative.display-inline-block
      =form_for "", remote: true, url: { controller: 'users', action: 'update' } do |f|
        = render "shared/flash"

        %table.table.position_relative.display-inline-block
          =f.hidden_field :id, value: u.id
          %tr
            %th
              = t('first_name')
            %th
              = f.text_field :first_name, value: u.first_name

          %tr
            %th
              = t('last_name')
            %th
              = f.text_field :last_name, value: u.last_name
          %tr
            %th
              = t('nickname')
            %th
              = f.text_field :nickname, value: u.nickname
          %tr
            %th
              = t('email')
            %th
              = f.text_field :email, value: u.email
          %tr
            %th
              = t('phone')
            %th
              = f.text_field :phone, value: u.phone
          %tr
            %th
              = t('telegram')
            %th
              = f.text_field :telegram, value: u.telegram
          %tr
            %th
              = t('is_available')
            %th
              .form-check.form-switch
                = f.check_box :is_available, checked: u.is_available, onclick: !current_user.nil? && current_user.rule.manager ? "" : "return false;", class: !current_user.nil? && current_user.rule.manager ? 'form-check-input transform-1-3 mx-5' : 'form-check-input transform-1-3 mx-5 opacity_05',  type: 'checkbox', id: 'flexSwitchCheckDefault'
          %tr
            %th
              Worker
            %th
              .form-check.form-switch
                = f.check_box :worker, checked: u.rule.worker, onclick: !current_user.nil? && current_user.rule.manager ? "" : "return false;", class: !current_user.nil? && current_user.rule.manager ? 'form-check-input transform-1-3 mx-5' : 'form-check-input transform-1-3 mx-5 opacity_05',  type: 'checkbox', id: 'flexSwitchCheckDefault'
          %tr
            %th
              Manager
            %th
              .form-check.form-switch
                = f.check_box :manager, checked: u.rule.manager, onclick: !current_user.nil? && current_user.rule.manager ? "" : "return false;", class: !current_user.nil? && current_user.rule.manager ? 'form-check-input transform-1-3 mx-5' : 'form-check-input transform-1-3 mx-5 opacity_05',  type: 'checkbox', id: 'flexSwitchCheckDefault'
          %tr
            %th
              Create user
            %th
              .form-check.form-switch
                = f.check_box :create_user, checked: u.rule.create_user, onclick: !current_user.nil? && current_user.rule.manager ? "" : "return false;", class: !current_user.nil? && current_user.rule.manager ? 'form-check-input transform-1-3 mx-5' : 'form-check-input transform-1-3 mx-5 opacity_05',  type: 'checkbox', id: 'flexSwitchCheckDefault'
          %tr
            %th
              Edit_user
            %th
              .form-check.form-switch
                = f.check_box :edit_user, checked: u.rule.edit_user, onclick: !current_user.nil? && current_user.rule.manager ? "" : "return false;", class: !current_user.nil? && current_user.rule.manager ? 'form-check-input transform-1-3 mx-5' : 'form-check-input transform-1-3 mx-5 opacity_05',  type: 'checkbox', id: 'flexSwitchCheckDefault'
          %tr
            %th
              Edit all work list
            %th
              .form-check.form-switch
                = f.check_box :edit_all_work_list, checked: u.rule.edit_all_work_list, onclick: !current_user.nil? && current_user.rule.manager ? "" : "return false;", class: !current_user.nil? && current_user.rule.manager ? 'form-check-input transform-1-3 mx-5' : 'form-check-input transform-1-3 mx-5 opacity_05',  type: 'checkbox', id: 'flexSwitchCheckDefault'
          %tr
            %th
              Edit work list
            %th
              .form-check.form-switch
                = f.check_box :edit_work_list, checked: u.rule.edit_work_list, onclick: !current_user.nil? && current_user.rule.manager ? "" : "return false;", class: !current_user.nil? && current_user.rule.manager ? 'form-check-input transform-1-3 mx-5' : 'form-check-input transform-1-3 mx-5 opacity_05',  type: 'checkbox', id: 'flexSwitchCheckDefault'
          %tr
            %th
              Edit all eggs collection
            %th
              .form-check.form-switch
                = f.check_box :edit_all_eggs_collection, checked: u.rule.edit_all_eggs_collection, onclick: !current_user.nil? && current_user.rule.manager ? "" : "return false;", class: !current_user.nil? && current_user.rule.manager ? 'form-check-input transform-1-3 mx-5' : 'form-check-input transform-1-3 mx-5 opacity_05',  type: 'checkbox', id: 'flexSwitchCheckDefault'
          %tr
            %th
              Edit eggs collection
            %th
              .form-check.form-switch
                = f.check_box :edit_eggs_collection, checked: u.rule.edit_eggs_collection, onclick: !current_user.nil? && current_user.rule.manager ? "" : "return false;", class: !current_user.nil? && current_user.rule.manager ? 'form-check-input transform-1-3 mx-5' : 'form-check-input transform-1-3 mx-5 opacity_05',  type: 'checkbox', id: 'flexSwitchCheckDefault'

              //
          %tr
            %th
              Change password
            %th
              .form-check.form-switch
                = f.check_box :change_pass, checked: params[:change_pass] == "1" ? true : false, type: 'checkbox', id: 'flexSwitchCheckDefault', class: "form-check-input transform-1-3 mx-5 checkbox_change_password"
              :javascript
                $(".fields_change_pass").hide()
                $(".checkbox_change_password").on('change', function() {
                   if ($(this).is(':checked')) {
                      $(".fields_change_pass").show(200)
                   } else {
                      $(".fields_change_pass").hide(200)
                   }
                })

                $(document).ready(function() {
                     if ($(".checkbox_change_password").is(':checked')) {
                      $(".fields_change_pass").show(200)
                   } else {
                      $(".fields_change_pass").hide(200)
                   }
                })

          %tr.fields_change_pass
            %th
              Old password
            %th
              = f.text_field :old_password, type: "password"

          %tr.fields_change_pass
            %th
              New password
            %th
              = f.text_field :new_password, type: "password"

          %tr.fields_change_pass
            %th
              Confirm password
            %th
              = f.text_field :confirm_password, type: "password"
              //

          %tr
            %th
              = f.submit "Save", class: "btn-primary btn"
